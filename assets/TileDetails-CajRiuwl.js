import{T as h}from"./TopLogoBar-FZS9uHrC.js";import{_ as V,u as q,r as s,o as f,c as v,b as l,a,w as r,f as M,d as c}from"./index-CQQ92lg-.js";import"./TegelsLogo-D7WfVnoh.js";const P={name:"TileDetails",props:{tileId:String},data(){const o=q();let e;this.tileId==="new"?e={id:-1,tilename:"",width:null,length:null,amountOfBoxes:null,squareMetersPerBox:null,totalSquareMeters:null,pricePerSquareMeter:null,image:null}:e=Object.assign({},o.getTileById(parseInt(this.tileId)));let d=null;return Number.isNaN(e.pricePerSquareMeter*e.totalSquareMeters)||(d=e.pricePerSquareMeter*e.totalSquareMeters),{store:o,tile:e,totalPrice:d,dialog:!1}},components:{TopLogoBar:h},mounted(){this.requestCameraPermission()},methods:{async requestCameraPermission(){await navigator.permissions.query({name:"camera"})},uploadImage(o){const e=o.target.files[0],d=new FileReader;d.readAsDataURL(e),d.onload=p=>{this.tile.image=p.target.result}},removeImage(){document.getElementById("image-view").classList.add("animate__animated","animate__fadeOutRight"),setTimeout(()=>{this.tile.image="",document.getElementById("image-view").classList.remove("animate__animated","animate__fadeOutRight")},1e3)},downloadImage(){const o=document.createElement("a");o.href=this.tile.image,o.download="VB_"+this.tile.tilename.replaceAll(" ","_")+".png",o.click()},async saveTile(){document.getElementById("details-form").classList.add("fadeOutRight"),document.getElementById("form-buttons").classList.add("animate__animated","animate__fadeOut"),this.tile.pricePerSquareMeter=parseFloat(this.tile.pricePerSquareMeter),await this.store.addOrUpdateTile(this.tile),setTimeout(()=>{this.store.saveTiles(),this.$router.back()},1e3)},removeTile(){document.getElementById("details-form").classList.add("animate__fadeOut"),document.getElementById("form-buttons").classList.add("animate__animated","animate__fadeOut"),this.store.removeTile(this.tile.id),this.dialog=!1,setTimeout(()=>{this.store.saveTiles(),this.$router.back()},1e3)},CalculateTotalSquareMeters(){this.tile.totalSquareMeters=(this.tile.squareMetersPerBox*this.tile.amountOfBoxes).toFixed(2),this.CalculatePriceTotal()},CalculatePriceTotal(){this.totalPrice=(this.tile.pricePerSquareMeter*this.tile.totalSquareMeters).toFixed(2)},CalculatePricePerSquareMeter(){this.tile.pricePerSquareMeter=(this.totalPrice/this.tile.totalSquareMeters).toFixed(2)},CalculateAmountOfBoxes(){this.tile.amountOfBoxes=(this.tile.totalSquareMeters/this.tile.squareMetersPerBox).toFixed(2)}}},B={id:"details-page",class:"details-page d-flex flex-column"},T={id:"details-form",class:"animate__animated"},k={class:"w-90 mx-auto d-flex flex-column justify-center align-center"},_={id:"tile-image",class:"d-flex flex-column justify-center align-center"},I={key:0,id:"image-view",class:"ml-1 d-flex flex-column w-80"},S=["src"],C={class:"tile-size d-flex flex-row justify-center align-center w-100"},O={class:"boxes d-flex flex-row align-center w-100"},j={class:"total-price d-flex flex-row align-start justify-space-between w-100 ga-4"},F={id:"form-buttons",class:"buttons w-90 mx-auto d-flex flex-row justify-space-between"},L={class:"w-100 mb-15"};function U(o,e,d,p,u,i){const x=s("TopLogoBar"),g=s("v-icon"),m=s("v-btn"),w=s("v-file-input"),n=s("v-text-field"),b=s("v-card"),y=s("v-dialog");return f(),v("div",B,[l(x),a("div",T,[a("div",k,[a("div",_,[u.tile.image?(f(),v("div",I,[a("img",{src:u.tile.image,class:"image mx-auto pt-5",alt:""},null,8,S),l(m,{color:"secondary",block:"",onClick:e[0]||(e[0]=t=>i.downloadImage())},{default:r(()=>[l(g,null,{default:r(()=>e[22]||(e[22]=[c("fa-download")])),_:1})]),_:1})])):M("",!0),l(w,{label:"Afbeelding kiezen",variant:"outlined","prepend-icon":"fa-solid fa-camera","append-icon":"fa-solid fa-trash-can",theme:"light",class:"mt-5",width:"85vw",density:"compact",accept:"image/png, image/jpeg, image/bmp",rules:[t=>!t||!t.length||t[0].size<1e7||"Maximale bestandsgrootte is 10MB"],onChange:i.uploadImage,"onClick:append":i.removeImage},null,8,["rules","onChange","onClick:append"])]),l(n,{variant:"underlined",density:"compact",width:"100%",name:"tileName",label:"Tegelnaam",color:"secondary",modelValue:this.tile.tilename,"onUpdate:modelValue":e[1]||(e[1]=t=>this.tile.tilename=t),onFocus:e[2]||(e[2]=t=>t.target.select())},null,8,["modelValue"]),a("div",C,[l(n,{variant:"underlined",density:"compact",name:"tileWidth",label:"Breedte",color:"secondary",type:"number",modelValue:this.tile.width,"onUpdate:modelValue":e[3]||(e[3]=t=>this.tile.width=t),onFocus:e[4]||(e[4]=t=>t.target.select())},null,8,["modelValue"]),e[23]||(e[23]=a("span",{class:"mx-2"},"x",-1)),l(n,{variant:"underlined",density:"compact",name:"tileLength",label:"Lengte",color:"secondary",type:"number",modelValue:this.tile.length,"onUpdate:modelValue":e[5]||(e[5]=t=>this.tile.length=t),onFocus:e[6]||(e[6]=t=>t.target.select())},null,8,["modelValue"])]),a("div",O,[l(n,{variant:"underlined",density:"compact",width:"50%",name:"amountOfBoxes",label:"Aantal dozen",color:"secondary",type:"number",modelValue:this.tile.amountOfBoxes,"onUpdate:modelValue":e[7]||(e[7]=t=>this.tile.amountOfBoxes=t),onInput:i.CalculateTotalSquareMeters,onFocus:e[8]||(e[8]=t=>t.target.select())},null,8,["modelValue","onInput"]),e[24]||(e[24]=a("span",{class:"mx-2"},"x",-1)),l(n,{variant:"underlined",density:"compact",width:"50%",name:"squareMetersPerBox",label:"m² per doos",color:"secondary",type:"number",modelValue:this.tile.squareMetersPerBox,"onUpdate:modelValue":e[9]||(e[9]=t=>this.tile.squareMetersPerBox=t),onInput:i.CalculateTotalSquareMeters,onFocus:e[10]||(e[10]=t=>t.target.select())},null,8,["modelValue","onInput"])]),l(n,{variant:"underlined",density:"compact",width:"100%",name:"totalSquareMeters",label:"Totaal m²",color:"secondary",modelValue:this.tile.totalSquareMeters,"onUpdate:modelValue":e[11]||(e[11]=t=>this.tile.totalSquareMeters=t),onInput:e[12]||(e[12]=t=>{i.CalculatePriceTotal,i.CalculateAmountOfBoxes}),onFocus:e[13]||(e[13]=t=>t.target.select())},null,8,["modelValue"]),a("div",j,[l(n,{variant:"underlined",density:"compact",prefix:"€",type:"number",min:"0.00",max:"10000.00",step:"0.5",width:"50%",name:"pricePerSquareMeter",label:"Prijs per m²",color:"secondary",modelValue:this.tile.pricePerSquareMeter,"onUpdate:modelValue":e[14]||(e[14]=t=>this.tile.pricePerSquareMeter=t),onFocus:e[15]||(e[15]=t=>t.target.select()),onInput:i.CalculatePriceTotal},null,8,["modelValue","onInput"]),l(n,{variant:"underlined",density:"compact",color:"secondary",width:"50%",prefix:"€",type:"number",label:"Totaalprijs",modelValue:this.totalPrice,"onUpdate:modelValue":e[16]||(e[16]=t=>this.totalPrice=t),onInput:i.CalculatePricePerSquareMeter,onFocus:e[17]||(e[17]=t=>t.target.select())},null,8,["modelValue","onInput"])]),a("div",F,[a("a",{onClick:e[18]||(e[18]=t=>o.$router.back())},[l(m,{width:"42vw",color:"red-darken-4"},{default:r(()=>e[25]||(e[25]=[c(" Annuleren ")])),_:1})]),l(m,{onclick:i.saveTile,id:"save-button",width:"42vw",color:"green-darken-3"},{default:r(()=>e[26]||(e[26]=[c(" Opslaan ")])),_:1},8,["onclick"])]),a("div",L,[l(m,{onClick:e[19]||(e[19]=t=>u.dialog=!0),"prepend-icon":"fa-solid fa-trash-can",class:"mt-2 mb-10 text-red-accent-4",color:"black",width:"100%",text:"Verwijder tegel"}),l(y,{modelValue:u.dialog,"onUpdate:modelValue":e[21]||(e[21]=t=>u.dialog=t),width:"auto"},{default:r(()=>[l(b,{"max-width":"400",title:"Verwijderen bevestigen",text:"Weet je zeker dat je de tegel wilt verwijderen uit de lijst?",color:"red-darken-3"},{prepend:r(()=>[l(g,{icon:"fa-solid fa-trash-can",color:"black"})]),actions:r(()=>[l(m,{variant:"tonal",color:"black",text:"Annuleren",onClick:e[20]||(e[20]=t=>u.dialog=!1)}),l(m,{variant:"elevated",color:"black",text:"Verwijderen",onClick:i.removeTile},null,8,["onClick"])]),_:1})]),_:1},8,["modelValue"])])])])])}const z=V(P,[["render",U],["__scopeId","data-v-b6d58a6e"]]);export{z as default};
